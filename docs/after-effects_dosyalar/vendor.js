$(function(){if("undefined"!=typeof AccountDock){var c=$("#billing"),n=c.data("stripe-id"),o=AccountDock.configure({key:"ad_acco_9fef40229188e8c0",customer:n});c.on("click",function(){o.open()})}});
$(function(){function t(){e=$("#npm-search").outerWidth()-$("#site-search-submit").outerWidth(),o.innerHTML=".autocomplete-container, .autocomplete-suggestions, #powered-by-constructor-io { width: "+e+"px !important }"}var e,o=document.createElement("style");document.head.appendChild(o),$(window).resize(t),t(),$.getScript("//cnstrc.com/js/ac.js",function(){$("#site-search").constructorAutocomplete({key:"CD06z4gVeqSXRiDL2ZNK",directResults:!0,maxHeight:400})})});
!function(e,t,n,a,i,o,c){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),c=t.getElementsByTagName(n)[0],o.async=1,o.src=a,c.parentNode.insertBefore(o,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",$('meta[name="x-npm:ga:id"]').attr("content"),"auto"),ga("require","displayfeatures"),ga("send","pageview"),$(document).ready(function(){$('meta[name="x-npm:ga:user-id"]').each(function(e,t){ga("set","userId",t.getAttribute("content"))}),$(document).on("click",".hiring-widget a",function(e){ga("send","event","Hiring Ads","click",$(this).parent().data("id"))}),$(document).on("click",".ad a",function(e){ga("send","event","Hiring Ads","click",$(this).attr("title"))});try{var e=JSON.parse($('meta[name="x-npm:ga:dimensions"]').attr("content")),t=function(t){var n={},a=$(t).data("promotion-id"),i=$(t).data("promotion-spot");return n[e[i]]=String(a),n};$(".promotion").each(function(e,n){ga("send","event","promotion","viewed",$(n).data("promotion-id"),t(n))}),$(document).on("click",".promotion a",function(e){ga("send","event","promotion","clicked",$(element).data("promotion-id"),t(element))})}catch(n){console.error(n)}$('meta[name="x-npm:ga:event"]').each(function(e,t){var n=["send","event"];try{ga.apply(null,n.concat(JSON.parse(t.getAttribute("content"))))}catch(a){console.error(a)}}),$('nav a[href="/enterprise"]').click(function(e){ga("send","event","npm Enterprise","click")}),$(document).on("click","[data-event-trigger='click']",function(e){ga("send","event",$(this).data("eventName"),"click")}),$('.pane a[href="/enterprise"]').click(function(e){var t=$(this).text();ga("set","dimension4",t),ga("send","event","Enterprise","ctaClick",t)}),$("body").on("click","a, button",function(e){var t=$(e.target).text(),n=$(e.target).data("event-name")||($(e.target).is("header a")?"header":"click");ga("set","dimension4",t),ga("send","event","navigation",n,t)})});
!function(e){"undefined"!=typeof StripeCheckout&&e(function(){var n,t=StripeCheckout.configure({key:e("input[type=hidden][data-key]").data("key"),image:"/static/images/n-64.png",token:function(t,a){t.amount=n,t.crumb=e('input[name="crumb"]').val(),e.ajax({url:"/joinwhoshiring",beforeSend:function(n){n.setRequestHeader("X-CSRF-Token",e('input[name="crumb"]').val())},data:t,type:"POST",headers:{"x-csrf-token":e('input[name="crumb"]').val()}}).done(function(n){e("section").hide(),e("h1:last").after('<h2 style="color: green;">Thank you for your payment! We\'ll get back to you soon.</h2>')}).error(function(n){e("section").hide(),e("h1:last").after('<h2 style="color: red;">Something went wrong. Please contact us at <a href="mailto:whoshiring@npmjs.com">whoshiring@npmjs.com</a>.</h2>')})}});e("#one-month").on("click",function(e){e.preventDefault(),n=35e3,t.open({name:"npm, Inc.",description:"Pay $350 for 1 month of advertising",amount:n})}),e("#three-months").click(function(e){n=1e5,t.open({name:"npm, Inc.",description:"Pay $1000 for 3 months of advertising",amount:n}),e.preventDefault()});var a=e('meta[name="x-stripe-key"]').attr("content"),i=StripeCheckout.configure({key:a,image:"/static/images/n-64.png",token:function(n,t){var a=e("#stripe-change-card").text();e("#stripe-change-card").text(n.card.last4),e.ajax({method:"POST",json:!0,url:"/settings/api/billing",data:{stripeToken:n.id,crumb:window.crumb},headers:{"x-csrf-token":window.crumb}}).then(function(n){e("#stripe-change-card").text(n.card.last4)},function(n){e("#stripe-change-card").text(a),e("#stripe-change-card+.alert").slideUp(function(){e(this).remove()});var t=e('<div class="alert alert-error alert-dismissable"><button class="close" data-dismiss="alert"><i class="fa fa-times"></i></button><div class="media mtn"><div class="media-left"><i class="fa alert-icon fa-exclamation-triangle"></i></div><div class="media-body em-high">There was an error updating your payment information.</div></div></div>').hide();e("#stripe-change-card").after(t),t.slideDown()})}});e("#stripe-change-card").on("click",function(e){e.preventDefault(),i.open({name:"npm, Inc.","panel-label":"Update Payment Card"}),e.preventDefault()}),e(window).on("popstate",function(){i.close()});var o=StripeCheckout.configure({key:a,image:"/static/images/n-64.png",amount:1400,token:function(n,t){e('#create-org-form [name="stripeToken"]').val(n.id),e("#create-org-form").submit()}});e("#create-org-form[data-need-card]").on("submit",function(n){e(this).find('[name="stripeToken"]').val()||(n.preventDefault(),o.open({name:"npm, Inc."}))});var r=StripeCheckout.configure({key:a,image:"/static/images/n-64.png",amount:1400,token:function(n,t){e('#transfer-username-form [name="stripeToken"]').val(n.id),e("#transfer-username-form").submit()}});e("#transfer-username-form[data-need-card]").on("submit",function(n){e(this).find('[name="stripeToken"]').val()||(n.preventDefault(),r.open({name:"npm, Inc."}))}),e(window).on("popstate",function(){o.close(),r.close()})})}(jQuery);